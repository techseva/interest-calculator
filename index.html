<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∞µ‡∞°‡±ç‡∞°‡±Ä ‡∞≤‡±Ü‡∞ï‡±ç‡∞ï‡∞≤‡±Å</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 15px;
    }

    h2 {
      text-align: center;
      color: #333;
    }

    .container {
      background: #fff;
      padding: 20px;
      max-width: 500px;
      margin: auto;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    label {
      margin-top: 10px;
      display: block;
      font-weight: bold;
    }

    input {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    .date-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .date-group input {
      flex: 1;
      min-width: 80px;
    }

    button {
      background: #2980b9;
      color: white;
      font-weight: bold;
      padding: 12px;
      border: none;
      margin-top: 15px;
      width: 100%;
      cursor: pointer;
      font-size: 16px;
      border-radius: 5px;
    }

    button:hover {
      background: #1abc9c;
    }

    .result {
      background: #ecf0f1;
      margin-top: 20px;
      padding: 15px;
      border-radius: 5px;
      text-align: center;
    }

    @media (max-width: 480px) {
      input, button {
        font-size: 15px;
      }
      .date-group {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

<h2>‡∞µ‡∞°‡±ç‡∞°‡±Ä ‡∞≤‡±Ü‡∞ï‡±ç‡∞ï‡∞≤‡±Å</h2>
<div class="container">

  <label>‡∞á‡∞ö‡±ç‡∞ö‡∞ø‡∞® ‡∞µ‡∞æ‡∞∞‡∞ø ‡∞™‡±á‡∞∞‡±Å:</label>
  <input type="text" id="giverNameInput" placeholder="‡∞á‡∞ö‡±ç‡∞ö‡∞ø‡∞® ‡∞µ‡∞æ‡∞∞‡∞ø ‡∞™‡±á‡∞∞‡±Å ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø">

  <label>‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±Å‡∞®‡±ç‡∞® ‡∞µ‡∞æ‡∞∞‡∞ø ‡∞™‡±á‡∞∞‡±Å:</label>
  <input type="text" id="receiverNameInput" placeholder="‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±Å‡∞®‡±ç‡∞® ‡∞µ‡∞æ‡∞∞‡∞ø ‡∞™‡±á‡∞∞‡±Å ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø">

  <label>‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±Å‡∞®‡±ç‡∞® ‡∞§‡±á‡∞¶‡±Ä:</label>
  <div class="date-group">
    <input type="text" id="startDay" inputmode="numeric" maxlength="2" placeholder="‡∞∞‡±ã‡∞ú‡±Å">
    <input type="text" id="startMonth" inputmode="numeric" maxlength="2" placeholder="‡∞®‡±Ü‡∞≤">
    <input type="text" id="startYear" inputmode="numeric" maxlength="4" placeholder="‡∞∏‡∞Ç‡∞µ‡∞§‡±ç‡∞∏‡∞∞‡∞Ç">
  </div>

  <label>‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡∞ø‡∞Ç‡∞ö‡±á ‡∞§‡±á‡∞¶‡±Ä:</label>
  <div class="date-group">
    <input type="text" id="endDay" inputmode="numeric" maxlength="2" placeholder="‡∞∞‡±ã‡∞ú‡±Å">
    <input type="text" id="endMonth" inputmode="numeric" maxlength="2" placeholder="‡∞®‡±Ü‡∞≤">
    <input type="text" id="endYear" inputmode="numeric" maxlength="4" placeholder="‡∞∏‡∞Ç‡∞µ‡∞§‡±ç‡∞∏‡∞∞‡∞Ç">
  </div>

  <label>‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±Å‡∞®‡±ç‡∞® ‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç:</label>
  <input type="text" id="principal" inputmode="numeric" placeholder="10000">

  <label>‡∞µ‡∞°‡±ç‡∞°‡±Ä ‡∞∞‡±á‡∞ü‡±Å (‚Çπ100 ‡∞ï‡∞ø ‡∞®‡±Ü‡∞≤‡∞ï‡∞ø):</label>
  <input type="text" id="rate" inputmode="numeric" placeholder="1.5">

  <button onclick="calculateMonthlyInterest()">‡∞≤‡±Ü‡∞ï‡±ç‡∞ï‡∞ø‡∞Ç‡∞ö‡±Å</button>

  <div class="result" id="resultBox" style="display:none;">
    <p id="giverNameDisplay" style="display:none;"><strong>‡∞á‡∞ö‡±ç‡∞ö‡∞ø‡∞® ‡∞µ‡∞æ‡∞∞‡±Å:</strong> <span id="giverNameValue"></span></p>
    <p id="receiverNameDisplay" style="display:none;"><strong>‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±Å‡∞®‡±ç‡∞® ‡∞µ‡∞æ‡∞∞‡±Å:</strong> <span id="receiverNameValue"></span></p>
    <p><strong>‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞∞‡±ã‡∞ú‡±Å‡∞≤‡±Å:</strong> <span id="days"></span></p>
    <p><strong>‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞®‡±Ü‡∞≤‡∞≤‡±Å:</strong> <span id="months"></span></p>
    <p><strong>‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞∏‡∞Ç‡∞µ‡∞§‡±ç‡∞∏‡∞∞‡∞æ‡∞≤‡±Å:</strong> <span id="years"></span></p>
    <p><strong>‡∞µ‡∞°‡±ç‡∞°‡±Ä ‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç:</strong> ‚Çπ<span id="interest"></span></p>
    <p><strong>‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡∞ø‡∞Ç‡∞ö‡∞æ‡∞≤‡±ç‡∞∏‡∞ø‡∞® ‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç:</strong> ‚Çπ<span id="totalAmount"></span></p>
    <button id="saveBtn" onclick="downloadImage()">üì∏ JPG ‡∞≤‡±ã ‡∞∏‡±á‡∞µ‡±ç ‡∞ö‡±á‡∞Ø‡∞ø</button>
    <button id="shareBtn" onclick="shareImage()">üì§ ‡∞∑‡±á‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞ø</button>
  </div>
</div>

<script>
function calculateMonthlyInterest() {
  const dd1 = document.getElementById("startDay").value.padStart(2, "0");
  const mm1 = document.getElementById("startMonth").value.padStart(2, "0");
  const yyyy1 = document.getElementById("startYear").value;
  const dd2 = document.getElementById("endDay").value.padStart(2, "0");
  const mm2 = document.getElementById("endMonth").value.padStart(2, "0");
  const yyyy2 = document.getElementById("endYear").value;
  const principal = parseFloat(document.getElementById("principal").value);
  const rate = parseFloat(document.getElementById("rate").value);
  const giverName = document.getElementById("giverNameInput").value.trim();
  const receiverName = document.getElementById("receiverNameInput").value.trim();

  if (
    dd1.length !== 2 || mm1.length !== 2 || yyyy1.length !== 4 ||
    dd2.length !== 2 || mm2.length !== 2 || yyyy2.length !== 4 ||
    isNaN(principal) || isNaN(rate)
  ) {
    alert("‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞´‡±Ä‡∞≤‡±ç‡∞°‡±ç‡∞∏‡±ç ‡∞∏‡∞∞‡±à‡∞® ‡∞Ö‡∞Ç‡∞ï‡±Ü‡∞≤‡∞§‡±ã ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø");
    return;
  }

  const start = new Date(parseInt(yyyy1), parseInt(mm1) - 1, parseInt(dd1));
  const end = new Date(parseInt(yyyy2), parseInt(mm2) - 1, parseInt(dd2));

  if (end <= start) {
    alert("‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡∞ø‡∞Ç‡∞ö‡±á ‡∞§‡±á‡∞¶‡±Ä, ‡∞™‡±ç‡∞∞‡∞æ‡∞∞‡∞Ç‡∞≠ ‡∞§‡±á‡∞¶‡±Ä ‡∞ï‡∞®‡±ç‡∞®‡∞æ ‡∞§‡∞∞‡±ç‡∞µ‡∞æ‡∞§ ‡∞â‡∞Ç‡∞°‡∞æ‡∞≤‡∞ø");
    return;
  }

  const totalDays = ((end.getFullYear() - start.getFullYear()) * 360) +
                    ((end.getMonth() - start.getMonth()) * 30) +
                    (end.getDate() - start.getDate());

  let days = totalDays;
  const years = Math.floor(days / 360);
  days %= 360;
  const months = Math.floor(days / 30);
  days %= 30;

  const interest = (principal / 100) * rate * (totalDays / 30);
  const totalAmount = principal + interest;

  if (giverName) {
    document.getElementById("giverNameValue").innerText = giverName;
    document.getElementById("giverNameDisplay").style.display = "block";
  } else {
    document.getElementById("giverNameDisplay").style.display = "none";
  }

  if (receiverName) {
    document.getElementById("receiverNameValue").innerText = receiverName;
    document.getElementById("receiverNameDisplay").style.display = "block";
  } else {
    document.getElementById("receiverNameDisplay").style.display = "none";
  }

  document.getElementById("days").innerText = days;
  document.getElementById("months").innerText = months;
  document.getElementById("years").innerText = years;
  document.getElementById("interest").innerText = interest.toFixed(2);
  document.getElementById("totalAmount").innerText = totalAmount.toFixed(2);
  document.getElementById("resultBox").style.display = "block";
}

function addWatermark(canvas) {
  const ctx = canvas.getContext("2d");
  ctx.font = "bold 14px Arial";
  ctx.fillStyle = "rgba(0, 0, 0, 0.4)";
  ctx.fillText("Created By Arun", 10, canvas.height - 10);
}

function downloadImage() {
  const saveBtn = document.getElementById("saveBtn");
  const shareBtn = document.getElementById("shareBtn");
  saveBtn.style.display = "none";
  shareBtn.style.display = "none";

  html2canvas(document.body).then(canvas => {
    addWatermark(canvas);
    const imageData = canvas.toDataURL("image/jpeg", 0.95);
    if (typeof AndroidShare !== "undefined") {
      AndroidShare.downloadImage(imageData);
    } else {
      const link = document.createElement("a");
      link.download = "‡∞µ‡∞°‡±ç‡∞°‡±Ä_‡∞≤‡±Ü‡∞ï‡±ç‡∞ï‡∞≤‡±Å.jpg";
      link.href = imageData;
      link.click();
    }
    saveBtn.style.display = "block";
    shareBtn.style.display = "block";
  });
}
<!-- Replace your existing shareImage function in the <script> tag with this -->

function shareImage() {
  const saveBtn = document.getElementById("saveBtn");
  const shareBtn = document.getElementById("shareBtn");
  saveBtn.style.display = "none";
  shareBtn.style.display = "none";

  html2canvas(document.body).then(canvas => {
    addWatermark(canvas);
    canvas.toBlob(blob => {
      const file = new File([blob], "‡∞µ‡∞°‡±ç‡∞°‡±Ä_‡∞≤‡±Ü‡∞ï‡±ç‡∞ï‡∞≤‡±Å.jpg", { type: "image/jpeg" });

      if (navigator.canShare && navigator.canShare({ files: [file] })) {
        navigator.share({
          files: [file],
          title: "‡∞µ‡∞°‡±ç‡∞°‡±Ä ‡∞≤‡±Ü‡∞ï‡±ç‡∞ï‡∞≤‡±Å",
          text: "‡∞á‡∞¶‡∞ø ‡∞Æ‡±Ä ‡∞µ‡∞°‡±ç‡∞°‡±Ä ‡∞≤‡±Ü‡∞ï‡±ç‡∞ï‡∞≤ ‡∞´‡∞≤‡∞ø‡∞§‡∞Ç.",
        }).catch((error) => {
          alert("‡∞∑‡±á‡∞∞‡±ç ‡∞µ‡∞ø‡∞´‡∞≤‡∞Æ‡±à‡∞Ç‡∞¶‡∞ø: " + error);
        });
      } else if (typeof AndroidShare !== "undefined") {
        // For Android WebView Java interface
        const reader = new FileReader();
        reader.onload = function () {
          const base64Image = reader.result;
          AndroidShare.shareImage(base64Image); // Send base64 to Android native
        };
        reader.readAsDataURL(blob);
      } else {
        alert("‡∞Æ‡±Ä ‡∞¨‡±ç‡∞∞‡±å‡∞ú‡∞∞‡±ç ‡∞à ‡∞á‡∞Æ‡±á‡∞ú‡±ç‚Äå‡∞®‡±Å ‡∞∑‡±á‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞≤‡±á‡∞®‡±Å. ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø Android App ‡∞≤‡±á‡∞¶‡∞æ Chrome Mobile ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.");
      }

      saveBtn.style.display = "block";
      shareBtn.style.display = "block";
    }, "image/jpeg", 0.95);
  });
}



</script>
</body>
</html>
